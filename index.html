<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AICO - 3D Fire Detection System</title>
    <link rel="stylesheet" href="src/css/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
    <script src="mqtt.js" type="text/javascript"></script>
</head>
<body>
    <div class="dashboard-3d">
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-fire-flame-curved"></i>
                        <div class="logo-pulse"></div>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">AICO</span>
                        <span class="logo-subtitle">Fire Detection</span>
                    </div>
                </div>
            </div>
            <div class="sidebar-menu">
                <button class="menu-item active" data-page="dashboard">
                    <i class="fas fa-th-large"></i>
                    <span>Dashboard</span>
                </button>
                <button class="menu-item" data-page="sensors">
                    <i class="fas fa-microchip"></i>
                    <span>All Sensors</span>
                </button>
                <button class="menu-item" data-page="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </button>
                <button class="menu-item" data-page="alerts">
                    <i class="fas fa-bell"></i>
                    <span>Alerts</span>
                    <span class="alert-badge" id="sidebarAlertCount">0</span>
                </button>
            </div>
            <div class="sidebar-footer">
                <div class="connection-status" id="connectionStatus">
                    <div class="status-dot"></div>
                    <span>MQTT Disconnected</span>
                </div>
                <div class="system-time" id="systemTime">--:--:--</div>
            </div>
        </nav>
        <main class="main-area">
            <header class="top-bar">
                <div class="top-left">
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                    <div class="breadcrumb">
                        <span>AICO</span>
                        <i class="fas fa-chevron-right"></i>
                        <span id="breadcrumbPage">Dashboard</span>
                    </div>
                </div>
                <div class="top-right">
                    <div class="board-health-display">
                        <div class="health-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="health-info">
                            <span class="health-label">Board Health</span>
                            <span class="health-value" id="boardHealthDisplay">0.00%</span>
                        </div>
                    </div>
                    <div class="quick-stats">
                        <div class="quick-stat">
                            <span class="stat-number" id="onlineSensors">0</span>
                            <span class="stat-label">Online</span>
                        </div>
                        <div class="quick-stat warning">
                            <span class="stat-number" id="warningCount">0</span>
                            <span class="stat-label">Warning</span>
                        </div>
                        <div class="quick-stat critical">
                            <span class="stat-number" id="criticalCount">0</span>
                            <span class="stat-label">Critical</span>
                        </div>
                    </div>
                </div>
            </header>
            <div class="page active" id="page-dashboard">
                <div class="page-toolbar glass-card dashboard-toolbar">
                    <div class="toolbar-left">
                        <div class="device-selector" id="dashboardDeviceSelector">
                            <button class="device-tab active" data-device="0">
                                <div class="device-status-dot"></div>
                                <span class="device-name">AICO Panel #1</span>
                                <span class="device-badge">Primary</span>
                            </button>
                            <button class="device-tab" data-device="1">
                                <div class="device-status-dot"></div>
                                <span class="device-name">AICO Panel #2</span>
                            </button>
                            <button class="device-tab" data-device="2">
                                <div class="device-status-dot"></div>
                                <span class="device-name">AICO Panel #3</span>
                            </button>
                        </div>
                    </div>
                    <div class="toolbar-right">
                        <div class="dashboard-summary">
                            <div class="summary-stat">
                                <span class="summary-label">Total Power</span>
                                <span class="summary-value" id="dashTotalPower">0.0 kW</span>
                            </div>
                            <div class="summary-stat">
                                <span class="summary-label">Avg Temp</span>
                                <span class="summary-value" id="dashAvgTemp">--°C</span>
                            </div>
                        </div>
                        <div class="live-indicator">
                            <span class="live-dot"></span>
                            <span>LIVE</span>
                        </div>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="metrics-column">
                        <div class="metric-card glass-card system-health-card">
                            <div class="card-header">
                                <span class="card-title">System Status</span>
                                <div class="status-indicator" id="systemStatusIndicator">
                                    <span class="status-dot active"></span>
                                    <span>Active</span>
                                </div>
                            </div>
                            <div class="health-display">
                                <div class="health-ring-container">
                                    <svg class="health-ring" viewBox="0 0 120 120">
                                        <circle class="ring-bg" cx="60" cy="60" r="52"/>
                                        <circle class="ring-progress" cx="60" cy="60" r="52" id="healthRingProgress"/>
                                    </svg>
                                    <div class="health-center">
                                        <span class="health-percent" id="healthPercent">0</span>
                                        <span class="health-symbol">%</span>
                                    </div>
                                </div>
                                <div class="health-stats">
                                    <div class="health-stat">
                                        <i class="fas fa-check-circle"></i>
                                        <span id="normalSensorCount">0</span>
                                        <label>Normal</label>
                                    </div>
                                    <div class="health-stat warning">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        <span id="warningSensorCount">0</span>
                                        <label>Warning</label>
                                    </div>
                                    <div class="health-stat critical">
                                        <i class="fas fa-times-circle"></i>
                                        <span id="criticalSensorCount">0</span>
                                        <label>Critical</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="metric-card glass-card sensor-metric" data-sensor="temperature">
                            <div class="sensor-header">
                                <div class="sensor-icon temp">
                                    <i class="fas fa-thermometer-half"></i>
                                </div>
                                <div class="sensor-info">
                                    <span class="sensor-name">Temperature</span>
                                    <span class="sensor-type">Thermal Sensor</span>
                                </div>
                                <div class="sensor-status" id="temp-card-status">
                                    <span class="status-badge normal">NORMAL</span>
                                </div>
                            </div>
                            <div class="sensor-value-row">
                                <span class="big-value" id="temp-card-value">0.0</span>
                                <span class="value-unit">°C</span>
                            </div>
                            <div class="sensor-range">
                                <span>Min: <strong id="temp-min">--</strong></span>
                                <span>Max: <strong id="temp-max">--</strong></span>
                            </div>
                            <div class="mini-sparkline" id="temp-sparkline"></div>
                        </div>
                        <div class="metric-card glass-card sensor-metric" data-sensor="humidity">
                            <div class="sensor-header">
                                <div class="sensor-icon humidity">
                                    <i class="fas fa-droplet"></i>
                                </div>
                                <div class="sensor-info">
                                    <span class="sensor-name">Humidity</span>
                                    <span class="sensor-type">Moisture Sensor</span>
                                </div>
                                <div class="sensor-status" id="humidity-card-status">
                                    <span class="status-badge normal">NORMAL</span>
                                </div>
                            </div>
                            <div class="sensor-value-row">
                                <span class="big-value" id="humidity-card-value">0.0</span>
                                <span class="value-unit">%</span>
                            </div>
                            <div class="sensor-range">
                                <span>Min: <strong id="humidity-min">--</strong></span>
                                <span>Max: <strong id="humidity-max">--</strong></span>
                            </div>
                            <div class="mini-sparkline" id="humidity-sparkline"></div>
                        </div>
                        <div class="metric-card glass-card sensor-metric" data-sensor="co">
                            <div class="sensor-header">
                                <div class="sensor-icon co">
                                    <i class="fas fa-skull-crossbones"></i>
                                </div>
                                <div class="sensor-info">
                                    <span class="sensor-name">Carbon Monoxide</span>
                                    <span class="sensor-type">CO Detector</span>
                                </div>
                                <div class="sensor-status" id="co-card-status">
                                    <span class="status-badge normal">NORMAL</span>
                                </div>
                            </div>
                            <div class="sensor-value-row">
                                <span class="big-value" id="co-card-value">0.0</span>
                                <span class="value-unit">ppm</span>
                            </div>
                            <div class="sensor-range">
                                <span>Min: <strong id="co-min">--</strong></span>
                                <span>Max: <strong id="co-max">--</strong></span>
                            </div>
                            <div class="mini-sparkline" id="co-sparkline"></div>
                        </div>
                    </div>
                    <div class="scene-column">
                        <div class="scene-container glass-card">
                            <div class="scene-header">
                                <span class="scene-title">Electrical Panel Monitoring</span>
                                <div class="scene-controls">
                                    <button class="scene-btn" id="resetView" title="Reset View">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                    <button class="scene-btn" id="toggleGrid" title="Toggle Grid">
                                        <i class="fas fa-border-all"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="electrical-panel-scene" id="panelScene">
                                <div class="panel-3d">
                                    <div class="panel-cabinet">
                                        <div class="cabinet-front">
                                            <div class="panel-door">
                                                <div class="door-handle"></div>
                                                <div class="door-window">
                                                    <div class="panel-interior">
                                                        <div class="breaker-row">
                                                            <div class="breaker active"></div>
                                                            <div class="breaker active"></div>
                                                            <div class="breaker active"></div>
                                                            <div class="breaker warning"></div>
                                                            <div class="breaker active"></div>
                                                            <div class="breaker active"></div>
                                                        </div>
                                                        <div class="breaker-row">
                                                            <div class="breaker active"></div>
                                                            <div class="breaker active"></div>
                                                            <div class="breaker active"></div>
                                                            <div class="breaker active"></div>
                                                            <div class="breaker active"></div>
                                                            <div class="breaker active"></div>
                                                        </div>
                                                        <div class="meter-display">
                                                            <div class="meter-screen">
                                                                <span class="meter-value" id="panelCurrentDisplay">0.0</span>
                                                                <span class="meter-unit">A</span>
                                                            </div>
                                                        </div>
                                                        <div class="status-leds">
                                                            <div class="led green active" title="Power"></div>
                                                            <div class="led yellow" id="ledWarning" title="Warning"></div>
                                                            <div class="led red" id="ledCritical" title="Critical"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="cabinet-side"></div>
                                        <div class="cabinet-top"></div>
                                    </div>
                                    <div class="panel-sensor" data-sensor="temperature" style="--pos-x: 20%; --pos-y: 15%;">
                                        <div class="sensor-pulse"></div>
                                        <div class="sensor-dot"></div>
                                        <div class="sensor-label">TEMP<br><span id="panel-temp">--</span>°C</div>
                                    </div>
                                    <div class="panel-sensor" data-sensor="humidity" style="--pos-x: 80%; --pos-y: 15%;">
                                        <div class="sensor-pulse"></div>
                                        <div class="sensor-dot"></div>
                                        <div class="sensor-label">HUM<br><span id="panel-humidity">--</span>%</div>
                                    </div>
                                    <div class="panel-sensor" data-sensor="gas" style="--pos-x: 15%; --pos-y: 50%;">
                                        <div class="sensor-pulse"></div>
                                        <div class="sensor-dot"></div>
                                        <div class="sensor-label">GAS<br><span id="panel-gas">--</span>Ω</div>
                                    </div>
                                    <div class="panel-sensor" data-sensor="surface-temp" style="--pos-x: 85%; --pos-y: 50%;">
                                        <div class="sensor-pulse"></div>
                                        <div class="sensor-dot"></div>
                                        <div class="sensor-label">SURF<br><span id="panel-surface">--</span>°C</div>
                                    </div>
                                    <div class="panel-sensor" data-sensor="current" style="--pos-x: 50%; --pos-y: 85%;">
                                        <div class="sensor-pulse"></div>
                                        <div class="sensor-dot"></div>
                                        <div class="sensor-label">CURR<br><span id="panel-current">--</span>A</div>
                                    </div>
                                    <div class="panel-sensor" data-sensor="co" style="--pos-x: 25%; --pos-y: 85%;">
                                        <div class="sensor-pulse"></div>
                                        <div class="sensor-dot"></div>
                                        <div class="sensor-label">CO<br><span id="panel-co">--</span>ppm</div>
                                    </div>
                                    <div class="scene-grid" id="sceneGrid"></div>
                                    <svg class="connection-svg" viewBox="0 0 400 350">
                                        <defs>
                                            <linearGradient id="lineGrad1" x1="0%" y1="0%" x2="100%" y2="0%">
                                                <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0"/>
                                                <stop offset="50%" style="stop-color:#00d4ff;stop-opacity:0.6"/>
                                                <stop offset="100%" style="stop-color:#00d4ff;stop-opacity:0"/>
                                            </linearGradient>
                                        </defs>
                                        <path class="data-line" d="M80,50 Q200,50 200,175" stroke="url(#lineGrad1)"/>
                                        <path class="data-line" d="M320,50 Q200,50 200,175" stroke="url(#lineGrad1)"/>
                                        <path class="data-line" d="M60,175 Q130,175 200,175" stroke="url(#lineGrad1)"/>
                                        <path class="data-line" d="M340,175 Q270,175 200,175" stroke="url(#lineGrad1)"/>
                                        <path class="data-line" d="M100,300 Q150,250 200,175" stroke="url(#lineGrad1)"/>
                                        <path class="data-line" d="M200,300 L200,175" stroke="url(#lineGrad1)"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="ai-analysis">
                                <div class="ai-icon">
                                    <i class="fas fa-brain"></i>
                                </div>
                                <p class="ai-text" id="aiAnalysisText">Sistem başlatılıyor, sensör verileri bekleniyor...</p>
                                <span class="ai-time" id="aiAnalysisTime">--</span>
                            </div>
                        </div>
                    </div>
                    <div class="sensors-column">
                        <div class="metric-card glass-card sensor-metric" data-sensor="gas">
                            <div class="sensor-header">
                                <div class="sensor-icon gas">
                                    <i class="fas fa-wind"></i>
                                </div>
                                <div class="sensor-info">
                                    <span class="sensor-name">Gas Resistance</span>
                                    <span class="sensor-type">Gas Sensor</span>
                                </div>
                                <div class="sensor-status" id="gas-card-status">
                                    <span class="status-badge normal">NORMAL</span>
                                </div>
                            </div>
                            <div class="sensor-value-row">
                                <span class="big-value" id="gas-card-value">0.0</span>
                                <span class="value-unit">Ω</span>
                            </div>
                            <div class="mini-sparkline" id="gas-sparkline"></div>
                        </div>
                        <div class="metric-card glass-card sensor-metric" data-sensor="air-quality">
                            <div class="sensor-header">
                                <div class="sensor-icon air">
                                    <i class="fas fa-smog"></i>
                                </div>
                                <div class="sensor-info">
                                    <span class="sensor-name">Air Quality</span>
                                    <span class="sensor-type">AQI Monitor</span>
                                </div>
                                <div class="sensor-status" id="air-quality-card-status">
                                    <span class="status-badge normal">NORMAL</span>
                                </div>
                            </div>
                            <div class="sensor-value-row">
                                <span class="big-value" id="air-quality-card-value">0.0</span>
                                <span class="value-unit">AQI</span>
                            </div>
                            <div class="mini-sparkline" id="air-quality-sparkline"></div>
                        </div>
                        <div class="metric-card glass-card sensor-metric" data-sensor="surface-temp">
                            <div class="sensor-header">
                                <div class="sensor-icon surface">
                                    <i class="fas fa-temperature-high"></i>
                                </div>
                                <div class="sensor-info">
                                    <span class="sensor-name">Surface Temp</span>
                                    <span class="sensor-type">Infrared Sensor</span>
                                </div>
                                <div class="sensor-status" id="surface-temp-card-status">
                                    <span class="status-badge normal">NORMAL</span>
                                </div>
                            </div>
                            <div class="sensor-value-row">
                                <span class="big-value" id="surface-temp-card-value">0.0</span>
                                <span class="value-unit">°C</span>
                            </div>
                            <div class="mini-sparkline" id="surface-temp-sparkline"></div>
                        </div>
                        <div class="metric-card glass-card sensor-metric" data-sensor="current">
                            <div class="sensor-header">
                                <div class="sensor-icon current">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div class="sensor-info">
                                    <span class="sensor-name">Current</span>
                                    <span class="sensor-type">Current Sensor</span>
                                </div>
                                <div class="sensor-status" id="current-card-status">
                                    <span class="status-badge normal">NORMAL</span>
                                </div>
                            </div>
                            <div class="sensor-value-row">
                                <span class="big-value" id="current-card-value">0.0</span>
                                <span class="value-unit">A</span>
                            </div>
                            <div class="mini-sparkline" id="current-sparkline"></div>
                        </div>
                        <div class="metric-card glass-card sensor-metric" data-sensor="pressure">
                            <div class="sensor-header">
                                <div class="sensor-icon pressure">
                                    <i class="fas fa-gauge-high"></i>
                                </div>
                                <div class="sensor-info">
                                    <span class="sensor-name">Pressure</span>
                                    <span class="sensor-type">Barometric</span>
                                </div>
                                <div class="sensor-status" id="pressure-card-status">
                                    <span class="status-badge normal">NORMAL</span>
                                </div>
                            </div>
                            <div class="sensor-value-row">
                                <span class="big-value" id="pressure-card-value">0.0</span>
                                <span class="value-unit">hPa</span>
                            </div>
                            <div class="mini-sparkline" id="pressure-sparkline"></div>
                        </div>
                    </div>
                </div>
                <div class="activity-section glass-card">
                    <div class="activity-header">
                        <h3>Sensor Activity / Week</h3>
                        <div class="activity-controls">
                            <button class="activity-btn" id="prevWeekBtn"><i class="fas fa-chevron-left"></i></button>
                            <span class="week-label" id="weekLabel">This Week</span>
                            <button class="activity-btn" id="nextWeekBtn"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="activity-chart" id="activityChart"></div>
                    <div class="activity-legend">
                        <span class="legend-item"><span class="dot normal"></span> Normal</span>
                        <span class="legend-item"><span class="dot warning"></span> Warning</span>
                        <span class="legend-item"><span class="dot critical"></span> Critical</span>
                        <span class="legend-item"><span class="dot inactive"></span> No Data</span>
                    </div>
                </div>
            </div>
            <div class="page" id="page-sensors">
                <div class="page-toolbar glass-card">
                    <div class="toolbar-left">
                        <div class="device-selector">
                            <button class="device-tab active" data-device="0">
                                <div class="device-status-dot"></div>
                                <span class="device-name">Device 1</span>
                                <span class="device-badge">Primary</span>
                            </button>
                            <button class="device-tab" data-device="1">
                                <div class="device-status-dot"></div>
                                <span class="device-name">Device 2</span>
                            </button>
                            <button class="device-tab" data-device="2">
                                <div class="device-status-dot"></div>
                                <span class="device-name">Device 3</span>
                            </button>
                        </div>
                    </div>
                    <div class="toolbar-right">
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="grid" title="Grid View">
                                <i class="fas fa-th-large"></i>
                            </button>
                            <button class="view-btn" data-view="list" title="List View">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                        <div class="live-indicator">
                            <span class="live-dot"></span>
                            <span>LIVE</span>
                        </div>
                    </div>
                </div>
                <div class="device-overview-row" id="deviceOverviewRow">
                    <div class="device-overview-card glass-card active" data-device="0">
                        <div class="device-card-header">
                            <div class="device-icon">
                                <i class="fas fa-microchip"></i>
                            </div>
                            <div class="device-info">
                                <span class="device-title">AICO Panel #1</span>
                                <span class="device-location"><i class="fas fa-map-marker-alt"></i> Ana Pano</span>
                            </div>
                            <div class="device-health-ring">
                                <svg viewBox="0 0 36 36">
                                    <circle class="ring-bg" cx="18" cy="18" r="15"/>
                                    <circle class="ring-progress" cx="18" cy="18" r="15" data-device="0"/>
                                </svg>
                                <span class="health-text" id="device0Health">100%</span>
                            </div>
                        </div>
                        <div class="device-card-stats">
                            <div class="mini-stat">
                                <i class="fas fa-thermometer-half"></i>
                                <span id="device0Temp">--°C</span>
                            </div>
                            <div class="mini-stat">
                                <i class="fas fa-droplet"></i>
                                <span id="device0Humidity">--%</span>
                            </div>
                            <div class="mini-stat">
                                <i class="fas fa-bolt"></i>
                                <span id="device0Current">--A</span>
                            </div>
                            <div class="mini-stat alerts">
                                <i class="fas fa-bell"></i>
                                <span id="device0Alerts">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="device-overview-card glass-card" data-device="1">
                        <div class="device-card-header">
                            <div class="device-icon">
                                <i class="fas fa-microchip"></i>
                            </div>
                            <div class="device-info">
                                <span class="device-title">AICO Panel #2</span>
                                <span class="device-location"><i class="fas fa-map-marker-alt"></i> Yedek Pano</span>
                            </div>
                            <div class="device-health-ring">
                                <svg viewBox="0 0 36 36">
                                    <circle class="ring-bg" cx="18" cy="18" r="15"/>
                                    <circle class="ring-progress" cx="18" cy="18" r="15" data-device="1"/>
                                </svg>
                                <span class="health-text" id="device1Health">100%</span>
                            </div>
                        </div>
                        <div class="device-card-stats">
                            <div class="mini-stat">
                                <i class="fas fa-thermometer-half"></i>
                                <span id="device1Temp">--°C</span>
                            </div>
                            <div class="mini-stat">
                                <i class="fas fa-droplet"></i>
                                <span id="device1Humidity">--%</span>
                            </div>
                            <div class="mini-stat">
                                <i class="fas fa-bolt"></i>
                                <span id="device1Current">--A</span>
                            </div>
                            <div class="mini-stat alerts">
                                <i class="fas fa-bell"></i>
                                <span id="device1Alerts">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="device-overview-card glass-card" data-device="2">
                        <div class="device-card-header">
                            <div class="device-icon">
                                <i class="fas fa-microchip"></i>
                            </div>
                            <div class="device-info">
                                <span class="device-title">AICO Panel #3</span>
                                <span class="device-location"><i class="fas fa-map-marker-alt"></i> Dış Pano</span>
                            </div>
                            <div class="device-health-ring">
                                <svg viewBox="0 0 36 36">
                                    <circle class="ring-bg" cx="18" cy="18" r="15"/>
                                    <circle class="ring-progress" cx="18" cy="18" r="15" data-device="2"/>
                                </svg>
                                <span class="health-text" id="device2Health">100%</span>
                            </div>
                        </div>
                        <div class="device-card-stats">
                            <div class="mini-stat">
                                <i class="fas fa-thermometer-half"></i>
                                <span id="device2Temp">--°C</span>
                            </div>
                            <div class="mini-stat">
                                <i class="fas fa-droplet"></i>
                                <span id="device2Humidity">--%</span>
                            </div>
                            <div class="mini-stat">
                                <i class="fas fa-bolt"></i>
                                <span id="device2Current">--A</span>
                            </div>
                            <div class="mini-stat alerts">
                                <i class="fas fa-bell"></i>
                                <span id="device2Alerts">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sensors-page-grid" id="allSensorsGrid">
                </div>
            </div>
            <div class="page" id="page-analytics">
                <div class="page-toolbar glass-card">
                    <div class="toolbar-left">
                        <div class="device-selector">
                            <button class="device-tab active" data-device="all">
                                <i class="fas fa-layer-group"></i>
                                <span class="device-name">All Devices</span>
                            </button>
                            <button class="device-tab" data-device="0">
                                <div class="device-status-dot"></div>
                                <span class="device-name">Panel #1</span>
                            </button>
                            <button class="device-tab" data-device="1">
                                <div class="device-status-dot"></div>
                                <span class="device-name">Panel #2</span>
                            </button>
                            <button class="device-tab" data-device="2">
                                <div class="device-status-dot"></div>
                                <span class="device-name">Panel #3</span>
                            </button>
                        </div>
                    </div>
                    <div class="toolbar-right">
                        <select id="analyticsTimeRange" class="chart-select">
                            <option value="50">Last 50 readings</option>
                            <option value="100">Last 100 readings</option>
                            <option value="200">Last 200 readings</option>
                        </select>
                        <div class="live-indicator">
                            <span class="live-dot"></span>
                            <span>LIVE</span>
                        </div>
                    </div>
                </div>
                <div class="analytics-grid">
                    <div class="energy-flow-card glass-card">
                        <div class="flow-header">
                            <div class="flow-title">
                                <h3>Energy Flow</h3>
                                <span class="flow-subtitle">Real-time power distribution</span>
                            </div>
                            <div class="flow-stats">
                                <div class="flow-stat">
                                    <span class="flow-stat-value" id="totalPower">0.0</span>
                                    <span class="flow-stat-label">Total kW</span>
                                </div>
                            </div>
                        </div>
                        <div class="energy-flow-visual" id="energyFlowVisual">
                            <svg class="flow-svg" viewBox="0 0 800 200" preserveAspectRatio="xMidYMid meet">
                                <g class="flow-source">
                                    <rect x="20" y="60" width="120" height="80" rx="8" class="source-box"/>
                                    <text x="80" y="95" class="source-label">INPUT</text>
                                    <text x="80" y="115" class="source-value" id="flowInputValue">220V</text>
                                </g>
                                <g class="flow-lines">
                                    <path class="flow-line active" d="M140,100 Q200,100 250,60" id="flowLine1"/>
                                    <path class="flow-line active" d="M140,100 L250,100" id="flowLine2"/>
                                    <path class="flow-line active" d="M140,100 Q200,100 250,140" id="flowLine3"/>
                                </g>
                                <g class="flow-node" data-device="0">
                                    <circle cx="300" cy="60" r="30" class="node-circle"/>
                                    <text x="300" y="55" class="node-icon">&#xf2db;</text>
                                    <text x="300" y="75" class="node-label">#1</text>
                                    <text x="360" y="55" class="node-value" id="flowDevice0Current">0.0A</text>
                                    <text x="360" y="75" class="node-power" id="flowDevice0Power">0W</text>
                                </g>
                                <g class="flow-node" data-device="1">
                                    <circle cx="300" cy="100" r="30" class="node-circle"/>
                                    <text x="300" y="95" class="node-icon">&#xf2db;</text>
                                    <text x="300" y="115" class="node-label">#2</text>
                                    <text x="360" y="95" class="node-value" id="flowDevice1Current">0.0A</text>
                                    <text x="360" y="115" class="node-power" id="flowDevice1Power">0W</text>
                                </g>
                                <g class="flow-node" data-device="2">
                                    <circle cx="300" cy="140" r="30" class="node-circle"/>
                                    <text x="300" y="135" class="node-icon">&#xf2db;</text>
                                    <text x="300" y="155" class="node-label">#3</text>
                                    <text x="360" y="135" class="node-value" id="flowDevice2Current">0.0A</text>
                                    <text x="360" y="155" class="node-power" id="flowDevice2Power">0W</text>
                                </g>
                                <g class="flow-lines output">
                                    <path class="flow-line" d="M430,60 L500,60" id="outLine1"/>
                                    <path class="flow-line" d="M430,100 L500,100" id="outLine2"/>
                                    <path class="flow-line" d="M430,140 L500,140" id="outLine3"/>
                                </g>
                                <g class="status-indicators">
                                    <circle cx="520" cy="60" r="8" class="status-dot normal" id="status0"/>
                                    <circle cx="520" cy="100" r="8" class="status-dot normal" id="status1"/>
                                    <circle cx="520" cy="140" r="8" class="status-dot normal" id="status2"/>
                                </g>
                                <g class="sensor-bars">
                                    <rect x="550" y="45" width="200" height="30" rx="4" class="bar-bg"/>
                                    <rect x="550" y="45" width="0" height="30" rx="4" class="bar-fill temp" id="tempBar0"/>
                                    <text x="560" y="65" class="bar-label">TEMP</text>
                                    <text x="740" y="65" class="bar-value" id="tempBarVal0">--°C</text>
                                    <rect x="550" y="85" width="200" height="30" rx="4" class="bar-bg"/>
                                    <rect x="550" y="85" width="0" height="30" rx="4" class="bar-fill humidity" id="humidityBar0"/>
                                    <text x="560" y="105" class="bar-label">HUM</text>
                                    <text x="740" y="105" class="bar-value" id="humidityBarVal0">--%</text>
                                    <rect x="550" y="125" width="200" height="30" rx="4" class="bar-bg"/>
                                    <rect x="550" y="125" width="0" height="30" rx="4" class="bar-fill co" id="coBar0"/>
                                    <text x="560" y="145" class="bar-label">CO</text>
                                    <text x="740" y="145" class="bar-value" id="coBarVal0">--ppm</text>
                                </g>
                            </svg>
                        </div>
                    </div>
                    <div class="chart-card glass-card full-width">
                        <div class="chart-header">
                            <h3>Sensor Trends</h3>
                            <div class="chart-controls">
                                <div class="sensor-chips" id="sensorChips">
                                    <button class="sensor-chip active" data-sensor="temperature">
                                        <i class="fas fa-thermometer-half"></i> Temp
                                    </button>
                                    <button class="sensor-chip" data-sensor="humidity">
                                        <i class="fas fa-droplet"></i> Humidity
                                    </button>
                                    <button class="sensor-chip" data-sensor="current">
                                        <i class="fas fa-bolt"></i> Current
                                    </button>
                                    <button class="sensor-chip" data-sensor="co">
                                        <i class="fas fa-skull-crossbones"></i> CO
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="large-chart" id="analyticsChart">
                            <canvas id="analyticsCanvas"></canvas>
                        </div>
                    </div>
                    <div class="comparison-section">
                        <div class="big-gauge-card glass-card">
                            <div class="big-gauge-header">
                                <h4>System Health</h4>
                                <span class="gauge-status" id="systemStatus">All Systems Normal</span>
                            </div>
                            <div class="big-gauge-body">
                                <div class="circular-gauge-container">
                                    <svg class="circular-gauge" viewBox="0 0 200 200">
                                        <defs>
                                            <linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                                <stop offset="0%" style="stop-color:#00c8ff"/>
                                                <stop offset="100%" style="stop-color:#7c3aed"/>
                                            </linearGradient>
                                        </defs>
                                        <circle class="gauge-bg" cx="100" cy="100" r="85"/>
                                        <circle class="gauge-progress" cx="100" cy="100" r="85" id="mainGaugeProgress"/>
                                        <circle class="gauge-inner" cx="100" cy="100" r="70"/>
                                    </svg>
                                    <div class="gauge-center-value">
                                        <span class="gauge-percent" id="mainGaugeValue">100</span>
                                        <span class="gauge-symbol">%</span>
                                    </div>
                                </div>
                                <div class="gauge-legend">
                                    <div class="legend-item">
                                        <span class="legend-dot normal"></span>
                                        <span>Normal: <strong id="normalDevices">3</strong></span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-dot warning"></span>
                                        <span>Warning: <strong id="warningDevices">0</strong></span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-dot critical"></span>
                                        <span>Critical: <strong id="criticalDevices">0</strong></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="quick-stats-grid">
                            <div class="quick-stat-card glass-card temp">
                                <div class="stat-visual">
                                    <canvas id="tempMiniGauge" width="80" height="80"></canvas>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-title">Temperature</span>
                                    <span class="stat-big-value" id="avgTemp">--</span>
                                    <span class="stat-range">Range: <span id="tempRange">-- ~ --</span></span>
                                </div>
                            </div>
                            <div class="quick-stat-card glass-card humidity">
                                <div class="stat-visual">
                                    <canvas id="humidityMiniGauge" width="80" height="80"></canvas>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-title">Humidity</span>
                                    <span class="stat-big-value" id="avgHumidity">--</span>
                                    <span class="stat-range">Range: <span id="humidityRange">-- ~ --</span></span>
                                </div>
                            </div>
                            <div class="quick-stat-card glass-card current">
                                <div class="stat-visual">
                                    <canvas id="currentMiniGauge" width="80" height="80"></canvas>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-title">Current</span>
                                    <span class="stat-big-value" id="avgCurrent">--</span>
                                    <span class="stat-range">Total: <span id="totalCurrent">--</span></span>
                                </div>
                            </div>
                            <div class="quick-stat-card glass-card alerts">
                                <div class="stat-visual">
                                    <div class="alert-count-display">
                                        <span id="totalAlerts">0</span>
                                    </div>
                                </div>
                                <div class="stat-info">
                                    <span class="stat-title">Alerts Today</span>
                                    <span class="stat-big-value" id="alertStatus">All Clear</span>
                                    <span class="stat-range">Last: <span id="lastAlertTime">--</span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page" id="page-alerts">
                <div class="alerts-page">
                    <div class="alerts-filters glass-card">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="critical">Critical</button>
                        <button class="filter-btn" data-filter="warning">Warning</button>
                        <button class="clear-btn" id="clearAlerts">
                            <i class="fas fa-trash"></i> Clear All
                        </button>
                    </div>
                    <div class="alerts-list-container glass-card">
                        <div class="alerts-list" id="alertsListFull">
                            <div class="no-alerts">
                                <i class="fas fa-check-circle"></i>
                                <p>No alerts at this time</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <div class="modal" id="sensorDetailModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-card">
            <div class="modal-header">
                <div class="modal-title">
                    <div class="modal-icon" id="modalSensorIcon"><i class="fas fa-thermometer-half"></i></div>
                    <div>
                        <h2 id="modalSensorName">Temperature</h2>
                        <span id="modalSensorType">Thermal Sensor</span>
                    </div>
                </div>
                <button class="modal-close" id="closeDetailModal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="modal-value-display">
                    <span class="modal-value" id="modalSensorValue">0.0</span>
                    <span class="modal-unit" id="modalSensorUnit">°C</span>
                    <div class="modal-status" id="modalSensorStatus">
                        <span class="status-badge normal">NORMAL</span>
                    </div>
                </div>
                <div class="modal-chart">
                    <h4>Historical Data</h4>
                    <canvas id="modalHistoryChart"></canvas>
                </div>
                <div class="modal-thresholds">
                    <div class="threshold-item">
                        <span class="threshold-label">Warning Threshold</span>
                        <span class="threshold-value warning" id="modalWarningThreshold">--</span>
                    </div>
                    <div class="threshold-item">
                        <span class="threshold-label">Critical Threshold</span>
                        <span class="threshold-value critical" id="modalCriticalThreshold">--</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="toast-container" id="toastContainer"></div>
    <script src="src/js/dashboard.js"></script>
</body>
</html>
